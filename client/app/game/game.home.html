<div class="top-bar">
  <div class="pull-left" tooltip="Morality: {{human.morality}}"><strong>{{turnsLeft}}</strong> Days Until Election</div>
  <reputation-panel reputations="totalReputations" kapitans="kapitans"></reputation-panel>
  <div class="pull-right" tooltip="Crocopio Cash: {{ai.totalCash}}"ng-class="{red: totalCash<0}">Funds: <strong>${{totalCash | number}}</strong></div>
</div>
<div class="overlay reveal-animation" ng-show="showOverlay" ng-switch="config.overlayState">
  <div ng-switch-when="WELCOME" class="container">
    <div class="row simulation-container">
      <div class="event-container">

      </div>
      <div class="activity-sim row newspaper" >
        <div ng-hide="config.loadedItems===9" class="col-xs-12 reveal-animation">
          <progressbar  value="config.loadedItems" max="9" ></progressbar>
        </div>
        <div ng-show="config.loadedItems===9" class="reveal-animation">
          <div class="col-xs-12">
            <div class="title">
              <h1>Summer Times</h1><h4>Last Week<span class="red">s</span> New<span class="red">'</span>s Today</h4>
            </div>
          </div>
          <div class="col-xs-12">
            <hr>
            <h4 class="right">Issue {{totalTurns+1 - turnsLeft}}</h4>
          </div>
          <div class="container body">
              <div class="left col-xs-7 headline">
                <h2>Crocopio Eyes Re-Election</h2>
                <img ng-src="assets/images/avatars/crocopio.jpg"></img>
                <p>Mayor Crocopio sets up his campaign HQ in <b>{{ai.hq.name}}</b>.</p>
                <p>"We don't change horses mid-stream. We move Forward!", explained Mayor Crocopio. "My own 5 point agenda on <platform-enumerator candidate="ai"></platform-enumerator> is exactly what we need."</p>
              </div>
              <div class="left col-xs-5 boxed">
                <h3>Mousey Faces Crocopio</h3>
                <img class="failed" ng-src="assets/images/avatars/mouseyMale.jpg"></img>
                <p>Mousey, a native of <b>{{human.hq.name}}</b> has announced his candidacy for Mayor of Summer Island.</p>
                <p>"We need Change in Summer Island, which is why I'm proposing a 5 point plan focusing on <platform-enumerator candidate="human"></platform-enumerator>", said the mayoralty hopeful.</p>
              </div>
              <div class="left col-xs-4">
                <h3>Local Author Writes Book </h3>
                <p>Last week at his Kapitolyo library, <b>Owlberto</b> announces the most important book ever written in Summer Island.</p>
              </div>
              <div class="left col-xs-4">
                <h3><b>Opinion:</b> How To Win Elections </h3>
                <p>In this day and age, the Kapitans hold sway over their districts. <b>Win their favor</b> and their district will be more than willing to hear you out.</p>
              </div>
              <div class="left col-xs-4">
                <h3><b>Initial Polls</b></h3>
                <p><poll-explainer total-reputations="totalReputations" ai="ai" human="human"></poll-explainer></p>
              </div>

          </div>
          <div class="col-xs-12 done-btn">
            <div ng-show="config.loadedItems===9" ng-click="onHideEventPanel()" class="btn btn-success">Done Reading</div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div ng-switch-when="EVENT" class="container">
    <div class="row simulation-container">
      <div class="event-container">
        <a ng-click="onHideEventPanel()" class="btn btn-success">Close</a>
      </div>
      <div class="activity-sim">
        <h3>{{currEventCard.name}}</h3>
        <img ng-class="{failed: !currEventCard.active}" src="assets/images/actions/typhoon.jpg"></img>
        <h4>{{currEventCard.description}}</h4>
      </div>
    </div>
  </div>
  <div ng-switch-when="SIMULATION" class="container reveal-animation">
    <div class="row">
      <div class="col-md-4">
        <h3>Simulating</h3>
      </div>
    </div>
    <div class="row simulation-container" ng-show="!endTurn">
      <div>
        <a ng-click="simulate.onNext()" class="btn btn-success" ng-class="{disabled: !simulate.isNextReady}">{{simulate.simulateText}}</a>
      </div>
      <div ng-show="simulate.activeAct">
        {{simulate.activeAct.name}} @ {{simulate.activeAct.location.name}} {{hoursElapsed+8 | itinerarytime}}
        <activity-sim activity="simulate.activeAct" on-next-ready="simulate.onNextReady" player="currentPlayer" ai="ai" issues="issues"></activity-sim>
      </div>
    </div>
    <div class="row simulation-container" ng-show="endTurn">
      <div>
        <a class="btn btn-success" ng-click="simulate.onEndTurn()">{{simulate.simulateText}}</a>
      </div>
      <summary-sim summaries="simulate.summaries" ai-summaries="simulate.aiSummaries" total-contribution="totalContribution" total-cost="totalCost"></summary-sim>
    </div>
  </div>
</div>
<cards-view cards="cards"></cards-view>
<div ng-include="'components/alert/alert.html'"></div>
<div class="row col-xs-5">
  <province-view districts="districts" selected-district="selectedDistrict" change-selected="changeSelectedDistrict" show-reputation="true"></province-view>
  <div ng-include="'app/game/game.itinerary.html'"></div>
</div>
<div ng-show="selectedDistrict" class="pull-right district-desc reveal-animation">
  <h4>{{selectedDistrict.name}}
    &nbsp;<span>{{selectedDistrict.info}}</span>
  </h4>
  <div class="district-status">
    <span class="district-animal" tooltip="{{selectedDistrict.kapitan.humanRelations | feelings}}"><img ng-src="assets/images/avatars/{{selectedDistrict.kapitan.image}}"></img> {{selectedDistrict.kapitan.name}}</span>
    <span class="district-animal" ng-show="selectedDistrict.specialist"><img ng-src="assets/images/avatars/{{selectedDistrict.specialist.image}}"></img>{{selectedDistrict.specialist.name}}</span>
  </div>

  <table class="table table-striped">
    <tr>
      <th>Issue</th>
      <th style="text-align: right;">Satisfaction</th>
    </tr>
    <tr ng-repeat="issue in human.issueStats">
      <td>
        <div>
          {{issue.name}}<span tooltip="{{selectedDistrict.issues[$index] | demandexplainer}}" class="district-difficulty {{selectedDistrict.issues[$index] | demandparser}}">{{selectedDistrict.issues[$index] | demandparser}}</span>
        </div>
      </td>

      <td style="text-align: right;">
        <div class="district-stances">
          <issue-level-view base="5" human-lvl="selectedDistrict.humanStance[$index]" ai-lvl="selectedDistrict.aiStance[$index]"></issue-level-view>
        </div>
      </td>
    </tr>
  </table>
  <h5>Activities</h5>
  <ul class="list-unstyled activity-list">
    <li ng-repeat="activity in selectedDistrict.activities" class="row staggering" ng-class="{disabled: activity.disabled}">
      <div class="col-xs-5" tooltip-html-unsafe="{{activity.description | activitytooltip:activity.tooltipVals}}">{{activity.name}}</div>
      <div class="col-xs-3" tooltip="{{activity.cost.gold}} * {{activity.location.goldCostModifier}}">{{activity.cost.gold * activity.location.goldCostModifier | formatcost}}</div>
      <div class="col-xs-2">{{activity.cost.hours * activity.location.timeCostModifier}} hrs</div>
      <div class="col-xs-1">
        <a class="btn" ng-click="addToItinerary(activity)" ng-show="!activity.disabled">
        <i ng-class="{'glyphicon-plus': !activity.wasScheduled, 'glyphicon-minus': activity.wasScheduled}" class="glyphicon"></i></a>
      </div>
    </li>
  </ul>
</div>
<div class="bottom container">
    <div class="content">
      <a class="btn btn-default" ng-click="onKapClicked()">Kapitans</a>
    </div>
</div>
